# 데이터 모델링
매핑은 색인될 문서의 데이터 모델링이라고 할 수 있다
## 매핑 API
매핑은 색인 시 데이터가 어디에 어떻게 저장될지를 결정하는 설정이다. DB의 스키마에 대응하는 개념으로 인덱스에 추가되는 각 데이터 타입을 구체적으로 정의하는 일이다.    
엘라스틱서치는 기본적으로 스키마리스이기 떄문에 명시적으로 필드를 정의하지 않아도 데이터 유형에 따라 필드 데이터 타입에 대한 매핑 정보가 자동으로 생성된다.     
근데 자동 매핑 방식이 잘못될 경우, 생성된 매핑의 타입을 변경이 안되기 때문에 처음 부터 다시 정의 해야 한다    
### 매핑 파라미터
색인할 필드의 데이터를 어떻게 저장할지에 대한 다양한 옵션 제공
- analyzer
해당 필드 데이터를 형태소 분석 
- normalizer
term query에 분석기를 사용하기 위해 사용. cafe, Cafe, caFe 를 같은 데이터로 인식되게 한다
- boost
필드에 가중치를 부여한다. 최신 엘라스틱서치는 색인 시 boost 설정을 할 수 없도록 바뀌었다
- coerce
색인 시 자동 변환을 허용할지 여부를 설정하는 파라미터다. 자동 형변환
- copy_to
매핑 파라미터를 추가한 필드의 값을 지정한 필드로 복사. 여러 개의 필드 데이터를 하나의 필드로 모은다
- fielddata
엘라스틱서치가 힙 공간에 생성하는 메모리 캐시다. 
- doc_values
text 타입을제외한 모든 타입에서 기본적으로 doc_values 캐시를 사용한다
- dynamic
매핑에 필드를 추가할 때 동적으로 생성할지, 생성하지 않을지를 결정
- enabled
메타 성격의 데이터라서 색인하고 싶지 않을 때, 검색은 되지만 색인은 하지 않을 때
- format
날짜 / 시간 포맷
- ignore_above
- ignore_malformed
- index
- fields
- norms
- null_value
- position_increment_gap
- properties
- search_analyzer
- similiarity
    - BM25
    - classic ( TF/IDF ) 
    - boolean
- store
- term_vector
## 메타 필드
엘라스틱서치에서 생성한 문서에서 제공하는 특별한 필드다. 메타 데이터를 저장하는 특수 목적의 필드로서 이를 사용하면 검색 시 문서를 다양한 형태로 제어하는 것이 가능해진다.   
### _index 메타 필드
해당 문서가 속한 인덱스의 이름 ( 없어 진다는 데 ? )
### _type 메타 필드
해당 문서가 속한 매핑 타입 정보 ( 없어 진다는 데 ? )
### _id 메타 필드
문서를 식별하는 유일한 키 값이다 ( 없어 진다는 데 ? )
### _uid 메타 필드
특수한 목적의 식별키 
### _source 메타 필드
문서의 원본 데이터를 제공한다
### _all 메타 필드
색인에 사용된 모든 필드의 정보를 가진 메타 필드
### _routing 메타 필드
특정 문서를 특정 샤드에 저장하기 위해 사용자가 지정하는 메타
## 필드 데이터 타입
엘라스틱서치에서 제공하는 데이터 타입으로 어떠한 종류가 있는지 정확하게 이해하기
### Keyword
키워드 형태로 사용할 데이터에 적합한 데이터 타입    
- 검색 시 필터링 되는 항목
- 정렬이 필요한 항목
- 집계 해야 하는 항목
### Text
분석기가 칼럼의 데이터를 문자열 데이터로 인식하고 이를 분석한다   
### Array
### Numeric
### Date
### Range
### Boolean
### Geo-Point
### IP
### Object
### Nested

## 엘라스틱서치 분석기
## Document API